<!DOCTYPE html>
<html lang="fr">
	<head>
		<meta charset="UTF-8">
		<!-- Empêche la requête automatique de favicon -->
		<link rel="icon" href="data:,">
		<title>Test Section</title>
		<style>
			body {
				font-family: Arial;
				max-width: 800px;
				margin: 0 auto;
				padding: 20px;
				background-color: #f5f5f5;
			}
			.container { 
				background: white;
				padding: 30px;
				border-radius: 10px;
				box-shadow: 0 2px 10px rgba(2, 2, 2, 0.1);
			}
			h1 {
				color: #333;
				text-align: center;
				border-bottom: 3px solid #4CAF50;
				padding-bottom: 10px;
			}
			h3 {
				color: #100daf;
				/* text-align: center; */
				padding-bottom: 10px;
			}
			.test-section {
				margin: 30px 0;
				padding: 20px;
				border: 1px solid #ddd;
				border-radius: 5px;
				background-color: #d4d4d4;
			}
			.test-section h2 {
				color: #4CAF50;
				margin-top: 0;
			}
			.test-section h3 {
				padding: 0px;
				background-color: #d4d4d4;
				color: #2b632d;
				margin-top: 10;
			}
			table {
				padding: 20px;
				border-collapse: collapse;
			}
			th, td {
				border: 2px solid black;
				padding: 10px;
				vertical-align: middle;
			}
		</style>
	</head>
	<body>
		<h1>Test Section</h1>
		<p>This page presents various commands or configurations to test on the Web Server.</p>

		<div class="test-section">
			<h2>FILE CONFIG PARSING</h2>
			<table>
				<tr>
					<td><h3>Command / Config</h3></td>
					<td><h3>Valid ?</h3></td>
				</tr>
				<tr>
					<!-- Command -->
					<td>./webserv ./config.conf</td>
					<!-- Valid ? -->
					<td> If exists : YES</td>
				</tr>
				<tr>
					<!-- Command -->
					<td>./webserv </td>
					<!-- Valid ? -->
					<td> YES, default configuration</td>
				</tr>
				<tr>
					<!-- Command -->
					<td>./webserv ./config.confe</td>
					<!-- Valid ? -->
					<td> NO, wrong extension</td>
				</tr>
				<tr>
					<!-- Command -->
					<td>./webserv ./nonexistent.conf</td>
					<!-- Valid ? -->
					<td> NO, can't open file</td>
				</tr>
				<tr>
					<!-- Command -->
					<td>no location block</td>
					<!-- Valid ? -->
					<td>YES, default location block</td>
				</tr>
				<tr>
					<!-- Command -->
					<td>no port/address configured</td>
					<!-- Valid ? -->
					<td>YES, default port or address</td>
				</tr>
				<tr>
					<!-- Command -->
					<td>no index</td>
					<!-- Valid ? -->
					<td>YES, default index</td>
				</tr>
				<tr>
					<!-- Command -->
					<td>no autoindex</td>
					<!-- Valid ? -->
					<td>YES, default autoindex is off</td>
				</tr>
				<tr>
					<!-- Command -->
					<td>listen ;</td>
					<!-- Valid ? -->
					<td>NO, invalid format</td>
				</tr>
				<tr>
					<!-- Command -->
					<td>listen rr;</td>
					<!-- Valid ? -->
					<td>NO, invalid listen format</td>
				</tr>
				<tr>
					<!-- Command -->
					<td>autoindex on off;</td>
					<!-- Valid ? -->
					<td>NO, invalid format</td>
				</tr>
				<tr>
					<!-- Command -->
					<td>return &p test;</td>
					<!-- Valid ? -->
					<td>NO, invalid format</td>
				</tr>
			</table>
		</div>

		<div class="test-section">
			<h2>MULTIPORTS AND SERVER CONFIG</h2>
			<table>
				<tr>
					<td><h3>Command</h3></td>
					<td><h3>Config</h3></td>
					<td><h3>Nginx</h3></td>
				</tr>
				<tr>
					<!-- Command -->
					<td>curl http://localhost:8080/</td>
					<!-- Config -->
					<td>listen 8080; </td>
					<!-- Nginx -->
					<td>200 OK</td>
				</tr>
				<tr>
					<!-- Command -->
					<td>curl http://127.0.0.2:8081/</td>
					<!-- Config -->
					<td>listen 8081; listen 127.0.0.2;</td>
					<!-- Nginx -->
					<td>200 OK</td>
				</tr>
				<tr>
					<!-- Command -->
					<td>curl -X GET http://localhost:8080/ & curl -X GET http://localhost:8081/ & curl -X POST -F "name=yannick" -F "message=hello" http://localhost:8080/data & wait</td>
					<!-- Config -->
					<td>listen 8081; listen 8080;</td>
					<!-- Nginx -->
					<td>200 OK | 201 Created | 204 No Content</td>
				</tr>
				<tr>
					<!-- Command -->
					<td>curl http://127.0.0.2:8080/</td>
					<!-- Config -->
					<td>listen 8080; index /pages/mix_page.html;</td>
					<!-- Nginx -->
					<td>200 OK</td>
				</tr>
				<tr>
					<!-- Command -->
					<td>curl http://127.0.0.2:8080/data/</td>
					<!-- Config -->
					<td>listen 8080; autoindex off; index inexistent.html;</td>
					<!-- Nginx -->
					<td>404 Not Found</td>
				</tr>
				<tr>
					<!-- Command -->
					<td>curl http://127.0.0.2:8080/data/</td>
					<!-- Config -->
					<td>listen 8080; autoindex on; index inexistent.html;</td>
					<!-- Nginx -->
					<td>200 OK</td>
				</tr>
				<tr>
					<!-- Command -->
					<td>curl -X DELETE http://127.0.0.2:8080/images/image_1.jpg</td>
					<!-- Config -->
					<td>allow_methods GET;</td>
					<!-- Nginx -->
					<td>403 Forbidden | 405 Not Allowed</td>
				</tr>
				<tr>
					<!-- Command -->
					<td>curl -X GET http://127.0.0.2:8080/images/</td>
					<!-- Config -->
					<td>location /images { return 200 "Im a test";}</td>
					<!-- Nginx -->
					<td>"Im a test"</td>
				</tr>
				<tr>
					<!-- Command -->
					<td>curl -X GET http://127.0.0.2:8080/images/</td>
					<!-- Config -->
					<td>location /images { return 301 http://localhost:3000/;}</td>
					<!-- Nginx -->
					<td>301 Moved Permanently</td>
				</tr>
				<tr>
					<!-- Command -->
					<td>curl -X GET http://127.0.0.2:8080/images/</td>
					<!-- Config -->
					<td>location /images { return http://localhost:3000/;}</td>
					<!-- Nginx -->
					<td>301 Moved Permanently</td>
				</tr>
			</table>
		</div>

		<div class="test-section">
			<h2>HTTP/1.1 REQUEST</h2>
			<table>
				<tr>
					<td><h3>Command</h3></td>
					<td><h3>Nginx</h3></td>
					<td><h3>Config / Comment</h3></td>
				</tr>
				<tr>
					<!-- Command -->
					<td>echo -e "GET / HTTP/1.1\r\nContent-Length 100\r\n" | nc localhost 3000</td>
					<!-- Nginx -->
					<td>400 Bad Request</td>
					<!-- Config -->
					<td>Wrong Header syntax (miss :)</td>
				</tr>
				<tr>
					<!-- Command -->
					<td>echo -e "GET / HTTP/1.1\r\Host: \r\n" | nc localhost 3000</td>
					<!-- Nginx -->
					<td>400 Bad Request</td>
					<!-- Config -->
					<td>Miss argument for the Header</td>
				</tr>
				<tr>
					<!-- Command -->
					<td>curl "http://localhost:8080/path%00with%00nulls"</td>
					<!-- Nginx -->
					<td>400 Bad Request</td>
					<!-- Config -->
					<td>Wrong URL</td>
				</tr>
				<tr>
					<!-- Command -->
					<td>echo -e "POST /images HTTP/1.1\r\nHost: localhost\r\nContent-Length: 3\r\n\r\n" | nc localhost 3000</td>
					<!-- Nginx -->
					<td>400 Bad Request </td>
					<!-- Config -->
					<td>Content-Length is incorect, no body here</td>
				</tr>
				<tr>
					<!-- Command -->
					<td>echo -e "POST /images HTTP/1.1\r\nHost: localhost\r\n\r\n123456" | nc localhost 3000</td>
					<!-- Nginx -->
					<td>411 Length Required | 400 Bad Request</td>
					<!-- Config -->
					<td>Content-Length is absent but mandatory</td>
				</tr>
				<tr>
					<!-- Command -->
					<td>curl -X PATCH http://localhost:8080/</td>
					<!-- Nginx -->
					<td>501 Not Implemented</td>
					<!-- Config -->
					<td>Method is not implemented in this server</td>
				</tr>
				<tr>
					<!-- Command -->
					<td>echo -e "GET / HTTP/2.0\r\n\r\n" | nc localhost 8080</td>
					<!-- Nginx -->
					<td>505 HTTP Version Not Supported</td>
					<!-- Config -->
					<td> </td>
				</tr>
				<tr>
					<!-- Command -->
					<td>echo -e "GET / HTTP/1.1\r\n\r\n" | nc localhost 8080</td>
					<!-- Nginx -->
					<td>400 Bad request</td>
					<!-- Config -->
					<td>Header Host is missing but mandatory</td>
				</tr>
				<tr>
					<!-- Command -->
					<td>curl -I http://localhost:3000/data/test.txt</td>
					<!-- Nginx -->
					<td>200 OK</td>
					<!-- Config -->
					<td>Check all headers are correct in the response.</td>
				</tr>
			</table>
			<p>Est-ce que si "Accept = text/html", si j'envoie du css doit etre une erreur ?</p>
		</div>

		<div class="test-section">
			<h2>GET</h2>
			<table>
				<tr>
					<td><h3>Command</h3></td>
					<td><h3>Config</h3></td>
					<td><h3>Nginx</h3></td>
				</tr>
				<tr>
					<!-- Command -->
					<td> </td>
					<!-- Config -->
					<td> </td>
					<!-- Nginx -->
					<td> </td>
				</tr>
			</table>
		</div>

		<div class="test-section">
			<h2>DOWNLOAD</h2>
			<table>
				<tr>
					<td><h3>Command</h3></td>
					<td><h3>Nginx</h3></td>
					<td><h3>Config / Comment</h3></td>
				</tr>
				<tr>
					<!-- Command -->
					<td>curl -v -o test_image.jpg http://localhost:8080/images/image_1.jpg</td>
					<!-- Nginx -->
					<td>200 OK</td>
					<!-- Config / Comment -->
					<td>compare both images</td>
				</tr>
				<tr>
					<!-- Command -->
					<td>curl -v -o downloaded_test.txt http://localhost:8080/data/test.txt</td>
					<!-- Nginx -->
					<td>200 OK</td>
					<!-- Config / Comment -->
					<td>diff ./data/test.txt downloaded_test.txt == should return nothing</td>
				</tr>
			</table>
		</div>

		<div class="test-section">
			<h2>POST - UPLOAD</h2>
			<table>
				<tr>
					<td><h3>Command</h3></td>
					<td><h3>Config</h3></td>
					<td><h3>Return</h3></td>
				</tr>
				<tr>
					<!-- Command -->
					<td>echo -e "POST /data/ HTTP/1.1\r\nHost: localhost\r\nContent-Type: text/plain\r\nContent-Length: 6\r\n\r\n123456" | nc localhost 8080</td>
					<!-- Config -->
					<td>In our server we handle POST of data in native way, according to some rules</td>
					<!-- Return -->
					<td> 403 Forbidden | 201 Created | 204 No Content</td>
				</tr>
				<tr>
					<!-- Command -->
					<td>echo -e "POST /images/ HTTP/1.1\r\nHost: localhost\r\nContent-Type: text/plain\r\nContent-Length: 6\r\n\r\n123456" | nc localhost 8080</td>
					<!-- Config -->
					<td>POST method is not allowed in this route</td>
					<!-- Return -->
					<td> 405 Method Not Allowed</td>
				</tr>
				<tr>
					<!-- Command -->
					<td>echo -e "POST /data/ HTTP/1.1\r\nHost: localhost\r\nContent-Type: text/plain\r\nContent-Length: 6\r\n\r\n123456" | nc localhost 8080</td>
					<!-- Config -->
					<td>Remove right on the file or directory</td>
					<!-- Return -->
					<td>403 Forbidden</td>
				</tr>
			</table>
		</div>

		<div class="test-section">
			<h2>DELETE</h2>
			<table>
				<tr>
					<td><h3>Command</h3></td>
					<td><h3>Config</h3></td>
					<td><h3>Nginx</h3></td>
				</tr>
				<tr>
					<!-- Command -->
					<td>echo -e "POST /data/ HTTP/1.1\r\nHost: localhost\r\nContent-Type: text/plain\r\nContent-Length: 6\r\n\r\n123456" | nc localhost 8080echo -e "POST /data/ HTTP/1.1\r\nHost: localhost\r\nContent-Type: text/plain\r\nContent-Length: 6\r\n\r\n123456" | nc localhost 3000</td>
					<!-- Config -->
					<td></td>
					<!-- Nginx -->
					<td> </td>
				</tr>
			</table>
		</div>

		<div class="test-section">
			<h2>CGI</h2>
			<table>
				<tr>
					<td><h3>Command</h3></td>
					<td><h3>Config</h3></td>
					<td><h3>Nginx</h3></td>
				</tr>
				<tr>
					<!-- Command -->
					<td> </td>
					<!-- Config -->
					<td> </td>
					<!-- Nginx -->
					<td> </td>
				</tr>
			</table>
		</div>

		<div class="test-section">
			<h2>CLIENT CONNECTION</h2>
			<table>
				<tr>
					<td><h3>Command</h3></td>
					<td><h3>Config</h3></td>
					<td><h3>Nginx</h3></td>
				</tr>
				<tr>
					<!-- Command -->
					<td> </td>
					<!-- Config -->
					<td> </td>
					<!-- Nginx -->
					<td> </td>
				</tr>
			</table>
		</div>

	</body>
</html>